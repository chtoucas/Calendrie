# Global editor config
#
# "Unlike EditorConfig files, global configuration files can't be used to
#  configure editor style settings for IDEs, such as indent size or whether to
#  trim trailing whitespace. Instead, they're designed purely for specifying
#  project-level analyzer configuration options."
#
# Notes
# - Release builds turn warnings into errors.
# - Setting the severity:
#   The magic property seems to be EnableCodeStyleSeverity
#   https://github.com/dotnet/roslyn/pull/73843
#   Use code-style severity or IDExxxx severity, but NOT both
#   https://github.com/dotnet/roslyn/issues/52991#issuecomment-1960692440
#
# See also
# https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/overview
# https://learn.microsoft.com/en-gb/dotnet/fundamentals/code-analysis/configuration-files#global-analyzerconfig
# https://github.com/dotnet/roslyn/blob/main/.editorconfig
# https://github.com/dotnet/runtime/blob/main/.editorconfig

is_global = true

# Severity #####################################################################

# Legit values:
# - error
# - warning
# - suggestion
# - silent
# - none
# - default

# Default severity
#dotnet_analyzer_diagnostic.severity = warning

# Default severity for analyzer diagnostics with category 'Style'
dotnet_analyzer_diagnostic.category-Style.severity = warning

#### Language and unnecessary code rules

# Rules with no associated code-style options
# See https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/style-rules/
#
# Simplify name
# WARNING: VS-only setting
#dotnet_diagnostic.IDE0001.severity = warning
# Simplify member access
# WARNING: VS-only setting
#dotnet_diagnostic.IDE0002.severity = warning
# Remove unnecessary cast
#dotnet_diagnostic.IDE0004.severity = warning
# Remove unnecessary using directives
# WARNING: Only enabled when GenerateDocumentationFile = true
#dotnet_diagnostic.IDE0005.severity = warning
# Add missing cases to switch statement
#dotnet_diagnostic.IDE0010.severity = warning
# Remove unreachable code
# WARNING: VS-only setting
#dotnet_diagnostic.IDE0035.severity = warning
# Convert anonymous type to tuple (obsolete)
#dotnet_diagnostic.IDE0050.severity = warning
# Remove unused private member
#dotnet_diagnostic.IDE0051.severity = warning
# Remove unread private member
#dotnet_diagnostic.IDE0052.severity = warning
# ake struct fields writable
#dotnet_diagnostic.IDE0064.severity = warning
# Use 'System.HashCode.Combine'
#dotnet_diagnostic.IDE0070.severity = warning
# Add missing cases to switch expression
#dotnet_diagnostic.IDE0072.severity = warning
# Remove unnecessary suppression operator
#dotnet_diagnostic.IDE0080.severity = warning
# Remove ByVal (VB-only rule)
#dotnet_diagnostic.IDE0081.severity = warning
# Convert typeof to nameof
#dotnet_diagnostic.IDE0082.severity = warning
# Remove unnecessary equality operator
# NB: I prefer "== false" to the logical negation operator (!)
dotnet_diagnostic.IDE0100.severity = suggestion
# Remove unnecessary discard
#dotnet_diagnostic.IDE0110.severity = warning
# Simplify LINQ expression
#dotnet_diagnostic.IDE0120.severity = warning
# Nullable directive is redundant
#dotnet_diagnostic.IDE0240.severity = warning
# Nullable directive is unnecessary
#dotnet_diagnostic.IDE0241.severity = warning
# Use 'nameof'
#dotnet_diagnostic.IDE0280.severity = warning

#### Miscellaneous rules

# Miscellaneous rules have no associated code-style options

# Remove invalid global 'SuppressMessageAttribute'
dotnet_diagnostic.IDE0076.severity = warning
# Avoid legacy format target in global 'SuppressMessageAttribute'
dotnet_diagnostic.IDE0077.severity = warning

#### Formatting rules

# All formatting options have rule ID IDE0055 and title "Fix formatting"
dotnet_diagnostic.IDE0055.severity = warning

#### Naming rules

# All naming options have rule ID IDE1006 and title "Naming rule violation"
# The severity value must be warning or error to be enforced on build.
dotnet_diagnostic.IDE1006.severity = warning

# Language and unnecessary code rules ##########################################

#### Dotnet code style settings

# IDE0047: Remove unnecessary parentheses
# IDE0048: Add parentheses for clarity
dotnet_style_parentheses_in_arithmetic_binary_operators = never_if_unnecessary:suggestion
dotnet_style_parentheses_in_relational_binary_operators = never_if_unnecessary:suggestion
dotnet_style_parentheses_in_other_binary_operators = always_for_clarity:suggestion
dotnet_style_parentheses_in_other_operators = never_if_unnecessary:suggestion

# IDE0073: Require file header
file_header_template = SPDX-License-Identifier: BSD-3-Clause\nCopyright (c) Tran Ngoc Bich. All rights reserved.

#### CSharp code style settings

# IDE0007: Use var instead of explicit type
# IDE0008: Use explicit type instead of var
csharp_style_var_for_built_in_types = false:warning
csharp_style_var_when_type_is_apparent = true:suggestion
csharp_style_var_elsewhere = false:suggestion

# IDE0011: Add braces
csharp_prefer_braces = when_multiline

# IDE0022: Use expression body for methods
csharp_style_expression_bodied_methods = when_on_single_line:suggestion

# IDE0023: Use expression body for conversion operators
# IDE0024: Use expression body for operators
csharp_style_expression_bodied_operators = when_on_single_line:suggestion

# IDE0032: Use auto-implemented property
dotnet_style_prefer_auto_properties = true:suggestion

# IDE0061: Use expression body for local functions
csharp_style_expression_bodied_local_functions = when_on_single_line:suggestion

# IDE0065: using directive placement
csharp_using_directive_placement = inside_namespace:warning

# IDE0078: Use pattern matching
csharp_style_prefer_pattern_matching = false:suggestion

# IDE0160: Use block-scoped namespace
# IDE0161: Use file-scoped namespace
csharp_style_namespace_declarations = file_scoped:warning

# IDE0290: Use primary constructor
csharp_style_prefer_primary_constructors = false:warning

# Naming rules #################################################################

# "Severity specification within a naming rule is only respected inside
#  development IDEs, such as Visual Studio. This setting is not understood by
#  the C# or VB compilers, hence not respected during build."
#
# Default severity is warning (see IDE1006 above).
# "dotnet_naming_rule.XXX.severity" does not work for me
#
# https://learn.microsoft.com/en-us/dotnet/fundamentals/code-analysis/style-rules/naming-rules

# Options: required_prefix, required_suffix, word_separator, capitalization
dotnet_naming_style.Pascal_Case_Style.capitalization = pascal_case
dotnet_naming_style.Camel_Case_Style.capitalization = camel_case

#### Fields

# Non-private static fields are PascalCase
dotnet_naming_rule.NonPrivateStaticField.severity = warning
dotnet_naming_rule.NonPrivateStaticField.symbols = NonPrivateStaticField_Symbols
dotnet_naming_rule.NonPrivateStaticField.style = Pascal_Case_Style

dotnet_naming_symbols.NonPrivateStaticField_Symbols.applicable_kinds = field
dotnet_naming_symbols.NonPrivateStaticField_Symbols.applicable_accessibilities = public, protected, internal, protected_internal, private_protected
dotnet_naming_symbols.NonPrivateStaticField_Symbols.required_modifiers = static

# Non-private readonly fields are PascalCase
dotnet_naming_rule.NonPrivateReadOnlyField.severity = warning
dotnet_naming_rule.NonPrivateReadOnlyField.symbols = NonPrivateReadOnlyField_Symbols
dotnet_naming_rule.NonPrivateReadOnlyField.style = Pascal_Case_Style

dotnet_naming_symbols.NonPrivateReadOnlyField_Symbols.applicable_kinds = field
dotnet_naming_symbols.NonPrivateReadOnlyField_Symbols.applicable_accessibilities = public, protected, internal, protected_internal, private_protected
dotnet_naming_symbols.NonPrivateReadOnlyField_Symbols.required_modifiers = readonly

# Constants are PascalCase
dotnet_naming_rule.Constant.severity = warning
dotnet_naming_rule.Constant.symbols = Constant_Symbols
dotnet_naming_rule.Constant.style = Pascal_Case_Style

dotnet_naming_symbols.Constant_Symbols.applicable_kinds = field, local
dotnet_naming_symbols.Constant_Symbols.applicable_accessibilities = *
dotnet_naming_symbols.Constant_Symbols.required_modifiers = const

# Static fields are camelCase and start with s_
dotnet_naming_rule.StaticField.severity = warning
dotnet_naming_rule.StaticField.symbols = StaticField_Symbols
dotnet_naming_rule.StaticField.style = StaticField_Style

dotnet_naming_symbols.StaticField_Symbols.applicable_kinds = field
dotnet_naming_symbols.StaticField_Symbols.applicable_accessibilities = *
dotnet_naming_symbols.StaticField_Symbols.required_modifiers = static

dotnet_naming_style.StaticField_Style.capitalization = pascal_case
dotnet_naming_style.StaticField_Style.required_prefix = s_

# Instance fields are camelCase and start with _
dotnet_naming_rule.InstanceField.severity = warning
dotnet_naming_rule.InstanceField.symbols = InstanceField_Symbols
dotnet_naming_rule.InstanceField.style = InstanceField_Style

dotnet_naming_symbols.InstanceField_Symbols.applicable_kinds = field
dotnet_naming_symbols.InstanceField_Symbols.applicable_accessibilities = *

dotnet_naming_style.InstanceField_Style.capitalization = camel_case
dotnet_naming_style.InstanceField_Style.required_prefix = _

#### Other kinds

# Non-private methods are PascalCase
dotnet_naming_rule.Method.severity = warning
dotnet_naming_rule.Method.symbols = Method_Symbols
dotnet_naming_rule.Method.style = Pascal_Case_Style

dotnet_naming_symbols.Method_Symbols.applicable_kinds = method
dotnet_naming_symbols.Method_Symbols.applicable_accessibilities = public, protected, internal, protected_internal, private_protected

# Parameters are camelCase
dotnet_naming_rule.Parameter.severity = warning
dotnet_naming_rule.Parameter.symbols = Parameter_Symbols
dotnet_naming_rule.Parameter.style = Camel_Case_Style

dotnet_naming_symbols.Parameter_Symbols.applicable_kinds = parameter
dotnet_naming_symbols.Parameter_Symbols.applicable_accessibilities = *

# Local functions are camelCase
dotnet_naming_rule.LocalFunction.severity = warning
dotnet_naming_rule.LocalFunction.symbols = LocalFunction_Symbols
dotnet_naming_rule.LocalFunction.style = Camel_Case_Style

dotnet_naming_symbols.LocalFunction_Symbols.applicable_kinds = local_function
